/*! For license information please see riot.js.LICENSE.txt */
(()=>{"use strict";function t(t){return t.replace(/-(\w)/g,((t,e)=>e.toUpperCase()))}function e(t,n){t.firstChild&&(n.appendChild(t.firstChild),e(t,n))}function n(t){Array.from(t).forEach(r)}const r=t=>t&&t.parentNode&&t.parentNode.removeChild(t),o=(t,e)=>e&&e.parentNode&&e.parentNode.insertBefore(t,e);var i={EACH:0,IF:1,SIMPLE:2,TAG:3,SLOT:4},s={ATTRIBUTE:0,EVENT:1,TEXT:2,VALUE:3};function a(t,e){return typeof t===e}function u(t){const e=t.ownerSVGElement;return!!e||null===e}function c(t){return!p(t.content)}function l(t){return a(t,"function")}function d(t){return!p(t)&&a(t,"object")}function p(t){return null==t}const h=Symbol("unmount"),m={nodes:[],mount(t,e){return this.update(t,e)},update(t,e){const{placeholder:n,nodes:i,childrenMap:s}=this,a=t===h?null:this.evaluate(t),u=a?Array.from(a):[],{newChildrenMap:c,batches:l,futureNodes:d}=(n.parentNode,function(t,e,n,r){const{condition:o,template:i,childrenMap:s,itemName:a,getKey:u,indexName:c,root:l,isTemplateTag:d}=r,p=new Map,h=[],m=[];return t.forEach(((t,r)=>{const f=function(t,e){let{itemName:n,indexName:r,index:o,item:i}=e;return t[n]=i,r&&(t[r]=o),t}(Object.create(e),{itemName:a,indexName:c,index:r,item:t}),b=u?u(f):r,g=s.get(b);if(function(t,e){return!!t&&!1===Boolean(t(e))}(o,f))return;const E=g?g.template:i.clone(),v=g?E.el:l.cloneNode(),T=!g,O=d&&T?function(t){const e=t.dom.cloneNode(!0);return{avoidDOMInjection:!0,fragment:e,children:Array.from(e.childNodes)}}(E):{};if(T?h.push((()=>E.mount(v,f,n,O))):h.push((()=>E.update(f,n))),d){const t=O.children||E.children;m.push(...t)}else m.push(v);s.delete(b),p.set(b,{template:E,context:f,index:r})})),{newChildrenMap:p,batches:h,futureNodes:m}}(u,t,e,this));return((t,e,n,i,s)=>{const a=n.length;let u=e.length,c=a,l=0,d=0,p=null;for(;l<u||d<c;)if(u===l){const t=c<a?d?i(n[d-1],-0).nextSibling:i(n[c-d],0):s;for(;d<c;)o(i(n[d++],1),t)}else if(c===d)for(;l<u;)p&&p.has(e[l])||r(i(e[l],-1)),l++;else if(e[l]===n[d])l++,d++;else if(e[u-1]===n[c-1])u--,c--;else if(e[l]===n[c-1]&&n[d]===e[u-1]){const t=i(e[--u],-1).nextSibling;o(i(n[d++],1),i(e[l++],-1).nextSibling),o(i(n[--c],1),t),e[u]=n[c]}else{if(!p){p=new Map;let t=d;for(;t<c;)p.set(n[t],t++)}if(p.has(e[l])){const t=p.get(e[l]);if(d<t&&t<c){let r=l,s=1;for(;++r<u&&r<c&&p.get(e[r])===t+s;)s++;if(s>t-d){const r=i(e[l],0);for(;d<t;)o(i(n[d++],1),r)}else h=i(n[d++],1),(m=i(e[l++],-1))&&m.parentNode&&m.parentNode.replaceChild(h,m)}else l++}else r(i(e[l++],-1))}var h,m})(0,i,d,function(t,e){return(n,r)=>{if(r<0){const n=t.pop();if(n){const{template:t,context:r}=n;t.unmount(r,e,null)}}return n}}(Array.from(s.values()),e),n),l.forEach((t=>t())),this.childrenMap=c,this.nodes=d,this},unmount(t,e){return this.update(h,e),this}},f={mount(t,e){return this.update(t,e)},update(t,e){const n=!!this.evaluate(t),r=!this.value&&n,i=this.value&&!n,s=()=>{const n=this.node.cloneNode();o(n,this.placeholder),this.template=this.template.clone(),this.template.mount(n,t,e)};switch(!0){case r:s();break;case i:this.unmount(t);break;default:n&&this.template.update(t,e)}return this.value=n,this},unmount(t,e){return this.template.unmount(t,e,!0),this}};function b(t){throw new Error(t)}function g(e){return e.reduce(((e,n)=>{const{value:r,type:o}=n;switch(!0){case!n.name&&0===o:return Object.assign({},e,r);case 3===o:e.value=n.value;break;default:e[t(n.name)]=n.value}return e}),{})}const E="undefined"==typeof Element?{}:Element.prototype,v=function(t){const e=new Map,n=n=>(e.has(n)||e.set(n,t.call(this,n)))&&e.get(n);return n.cache=e,n}((t=>E.hasOwnProperty(t)));const T=/^on/,O={handleEvent(t){this[t.type](t)}},N=new WeakMap;function x(t){return p(t)?"":t}const y=(t,e)=>{const n=t.childNodes[e];if(n.nodeType===Node.COMMENT_NODE){const e=document.createTextNode("");return t.replaceChild(e,n),e}return n};var A={0:function t(e,n,r,o){let{name:i}=n;if(!i)return o&&function(t,e,n){const r=e?Object.keys(e):[];Object.keys(n).filter((t=>!r.includes(t))).forEach((e=>t.removeAttribute(e)))}(e,r,o),void(r&&function(e,n){Object.entries(n).forEach((n=>{let[r,o]=n;return t(e,{name:r},o)}))}(e,r));!v(i)&&(function(t){return a(t,"boolean")}(r)||d(r)||l(r))&&(e[i]=r),e[function(t){return p(t)||!1===t||""===t||d(t)||l(t)?"removeAttribute":"setAttribute"}(r)](i,function(t,e){return!0===e?t:e}(i,r))},1:function(t,e,n){let{name:r}=e;const o=r.replace(T,""),i=N.get(t)||(t=>{const e=Object.create(O);return N.set(t,e),e})(t),[s,a]=(t=>Array.isArray(t)?t:[t,!1])(n),u=i[o],c=s&&!u;u&&!s&&t.removeEventListener(o,i),c&&t.addEventListener(o,i,a),i[o]=s},2:function(t,e,n){t.data=x(n)},3:function(t,e,n){t.value=x(n)}};const M={mount(t){return this.value=this.evaluate(t),j(this,this.value),this},update(t){const e=this.evaluate(t);return this.value!==e&&(j(this,e),this.value=e),this},unmount(){return 1===this.type&&j(this,null),this}};function j(t,e){return A[t.type](t.node,t,e,t.value)}function _(t,e){return Object.assign({},M,e,{node:2===e.type?y(t,e.childNodeIndex):t})}const S=new Map,w=Symbol("riot-component"),C=new Set,U="is",P="mount",D="update",I="unmount",K="shouldUpdate",L="onBeforeMount",Y="onMounted",B="onBeforeUpdate",k="onUpdated",R="onBeforeUnmount",V="onUnmounted",H="props",z="state",$="slots",F="root",G=Symbol.for("pure"),q=Symbol("parent"),X=Symbol("attributes"),W=Symbol("template");var Z=Object.freeze({__proto__:null,COMPONENTS_IMPLEMENTATION_MAP:S,DOM_COMPONENT_INSTANCE_PROPERTY:w,PLUGINS_SET:C,IS_DIRECTIVE:U,VALUE_ATTRIBUTE:"value",MOUNT_METHOD_KEY:P,UPDATE_METHOD_KEY:D,UNMOUNT_METHOD_KEY:I,SHOULD_UPDATE_KEY:K,ON_BEFORE_MOUNT_KEY:L,ON_MOUNTED_KEY:Y,ON_BEFORE_UPDATE_KEY:B,ON_UPDATED_KEY:k,ON_BEFORE_UNMOUNT_KEY:R,ON_UNMOUNTED_KEY:V,PROPS_KEY:H,STATE_KEY:z,SLOTS_KEY:$,ROOT_KEY:F,IS_PURE_SYMBOL:G,PARENT_KEY_SYMBOL:q,ATTRIBUTES_KEY_SYMBOL:X,TEMPLATE_KEY_SYMBOL:W});const J=(t,e)=>t[q]||e,Q={attributes:[],getTemplateScope(t,e){return function(t,e,n){if(!t||!t.length)return n;const r=t.map((t=>Object.assign({},t,{value:t.evaluate(e)})));return Object.assign(Object.create(n||null),g(r))}(this.attributes,t,e)},mount(t,e){const n=!!t.slots&&t.slots.find((t=>{let{id:e}=t;return e===this.name})),{parentNode:o}=this.node,i=J(t,e);return this.template=n&&at(n.html,n.bindings).createDOM(o),this.template&&(this.template.mount(this.node,this.getTemplateScope(t,i),i),this.template.children=Array.from(this.node.childNodes),tt(this.node)),r(this.node),this},update(t,e){if(this.template){const n=J(t,e);this.template.update(this.getTemplateScope(t,n),n)}return this},unmount(t,e,n){return this.template&&this.template.unmount(this.getTemplateScope(t,e),null,n),this}};function tt(t){const e=t&&t.firstChild;e&&(o(e,t),tt(t))}function et(t){return t.reduce(((t,e)=>{let{bindings:n}=e;return t.concat(n)}),[])}const nt={mount(t){return this.update(t)},update(t,e){const n=this.evaluate(t);return n===this.name?this.tag.update(t):(this.unmount(t,e,!0),this.name=n,this.tag=(r=this.getComponent(n),o=this.slots,i=this.attributes,void 0===o&&(o=[]),void 0===i&&(i=[]),r?r({slots:o,attributes:i}):at(function(t){return t.reduce(((t,e)=>t+e.html),"")}(o),[...et(o),{expressions:i.map((t=>Object.assign({type:0},t)))}])),this.tag.mount(this.node,t)),this;var r,o,i},unmount(t,e,n){return this.tag&&this.tag.unmount(n),this}};var rt={1:function(t,e){let{evaluate:n,template:i}=e;const s=document.createTextNode("");return o(s,t),r(t),Object.assign({},f,{node:t,evaluate:n,placeholder:s,template:i.createDOM(t)})},2:function(t,e){let{expressions:n}=e;return Object.assign({},(r=n.map((e=>_(t,e))),["mount","update","unmount"].reduce(((t,e)=>Object.assign({},t,{[e]:t=>r.map((n=>n[e](t)))&&undefined})),{})));var r},0:function(t,e){let{evaluate:n,condition:i,itemName:s,indexName:a,getKey:u,template:l}=e;const d=document.createTextNode(""),p=t.cloneNode();return o(d,t),r(t),Object.assign({},m,{childrenMap:new Map,node:t,root:p,condition:i,evaluate:n,isTemplateTag:c(p),template:l.createDOM(t),getKey:u,indexName:a,itemName:s,placeholder:d})},3:function(t,e){let{evaluate:n,getComponent:r,slots:o,attributes:i}=e;return Object.assign({},nt,{node:t,evaluate:n,slots:o,attributes:i,getComponent:r})},4:function(t,e){let{name:n,attributes:r}=e;return Object.assign({},Q,{attributes:r,node:t,name:n})}};function ot(t,e){return t.map((t=>2===t.type?Object.assign({},t,{childNodeIndex:t.childNodeIndex+e}):t))}function it(t,n){switch(!0){case u(t):e(n,t);break;case c(t):t.parentNode.replaceChild(n,t);break;default:t.appendChild(n)}}const st=Object.freeze({createDOM(t){return this.dom=this.dom||function(t,e){return e&&("string"==typeof e?function(t,e){return u(t)?function(t,e){return e.ownerDocument.importNode((new window.DOMParser).parseFromString(`<svg xmlns="http://www.w3.org/2000/svg">${t}</svg>`,"application/xml").documentElement,!0)}(e,t):function(t,e){const n=c(e)?e:document.createElement("template");return n.innerHTML=t,n.content}(e,t)}(t,e):e)}(t,this.html),this},mount(t,e,n,r){if(void 0===r&&(r={}),!t)throw new Error("Please provide DOM node to mount properly your template");this.el&&this.unmount(e);const{fragment:o,children:i,avoidDOMInjection:s}=r,{parentNode:a}=i?i[0]:t,u=c(t),l=u?Math.max(Array.from(a.childNodes).indexOf(t),0):null;return this.isTemplateTag=u,this.createDOM(t),this.dom&&(this.fragment=o||this.dom.cloneNode(!0)),this.el=this.isTemplateTag?a:t,this.children=this.isTemplateTag?i||Array.from(this.fragment.childNodes):null,!s&&this.fragment&&it(t,this.fragment),this.bindings=this.bindingsData.map((t=>function(t,e,n){const{selector:r,type:o,redundantAttribute:i,expressions:s}=e,a=r?t.querySelector(r):t;i&&a.removeAttribute(i);const u=s||[];return(rt[o]||rt[2])(a,Object.assign({},e,{expressions:n&&!r?ot(u,n):u}))}(this.el,t,l))),this.bindings.forEach((t=>t.mount(e,n))),this},update(t,e){return this.bindings.forEach((n=>n.update(t,e))),this},unmount(t,e,o){if(this.el){switch(this.bindings.forEach((n=>n.unmount(t,e,o))),!0){case this.children&&null!==o:n(this.children);break;case!0===o:r(this.el);break;case null!==o:n(this.el.childNodes)}this.el=null}return this},clone(){return Object.assign({},this,{el:null})}});function at(t,e){return void 0===e&&(e=[]),Object.assign({},st,{html:t,bindingsData:e})}function ut(){return this}function ct(t){return l(t)?t.prototype&&t.prototype.constructor?new t:t():t}function lt(t,e,n,r){return void 0===r&&(r={}),Object.defineProperty(t,e,Object.assign({value:n,enumerable:!1,writable:!1,configurable:!0},r)),t}function dt(t,e,n){return Object.entries(e).forEach((e=>{let[r,o]=e;lt(t,r,o,n)})),t}function pt(t,e){return Object.entries(e).forEach((e=>{let[n,r]=e;t[n]||(t[n]=r)})),t}function ht(t){return Array.isArray(t)?t:/^\[object (HTMLCollection|NodeList|Object)\]$/.test(Object.prototype.toString.call(t))&&"number"==typeof t.length?Array.from(t):[t]}function mt(t,e){return ht("string"==typeof t?(e||document).querySelectorAll(t):t)}const ft=t=>1===t.length?t[0]:t;function bt(t,e,n){const r="object"==typeof e?e:{[e]:n},o=Object.keys(r);return ht(t).forEach((t=>{o.forEach((e=>t.setAttribute(e,r[e])))})),t}const gt=new Map;var Et,vt={CSS_BY_NAME:gt,add(t,e){return gt.has(t)||(gt.set(t,e),this.inject()),this},inject(){return(Et||(bt(Et=mt("style[riot]")[0]||document.createElement("style"),"type","text/css"),Et.parentNode||document.head.appendChild(Et),Et)).innerHTML=[...gt.values()].join("\n"),this},remove(t){return gt.has(t)&&(gt.delete(t),this.inject()),this}};function Tt(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return function(){for(var e=arguments.length,r=new Array(e),o=0;o<e;o++)r[o]=arguments[o];return(r=[...n,...r]).length<t.length?Tt(t,...r):t(...r)}}function Ot(t){return function(t,e,n){const r="string"==typeof e?[e]:e;return ft(ht(t).map((t=>ft(r.map((e=>t.getAttribute(e)))))))}(t,U)||t.tagName.toLowerCase()}const Nt=Object.freeze({$(t){return mt(t,this.root)[0]},$$(t){return mt(t,this.root)}}),xt=Object.freeze({[P]:ut,[D]:ut,[I]:ut}),yt=Object.freeze({[K]:ut,[L]:ut,[Y]:ut,[B]:ut,[k]:ut,[R]:ut,[V]:ut}),At=Object.assign({},xt,{clone:ut,createDOM:ut});const Mt=(t,e)=>t[w]=e;function jt(t){return[P,D,I].reduce(((e,n)=>(e[n]=t(n),e)),{})}function _t(t){let{css:e,template:n,exports:r,name:o}=t;const a=n?function(t,e){return t(at,s,i,(t=>e[t]||S.get(t)))}(n,r?(void 0===(u=r.components)&&(u={}),Object.entries(ct(u)).reduce(((t,e)=>{let[n,r]=e;var o;return t[(o=n,o.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase())]=_t(r),t}),{})):{}):At;var u;return t=>{let{slots:i,attributes:s,props:u}=t;if(r&&r[G])return function(t,e){let{slots:n,attributes:r,props:o,css:i,template:s}=e;s&&b("Pure components can not have html"),i&&b("Pure components do not have css");const a=pt(t({slots:n,attributes:r,props:o}),xt);return jt((t=>function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];if(t===P){const[t]=n;Mt(t,a)}return a[t](...n),a}))}(r,{slots:i,attributes:s,props:u,css:e,template:n});const c=ct(r)||{},l=function(t){let{css:e,template:n,componentAPI:r,name:o}=t;return e&&o&&vt.add(o,e),Tt(wt)(dt(pt(r,Object.assign({},yt,{[z]:{}})),Object.assign({[$]:null,[F]:null},Nt,{name:o,css:e,template:n})))}({css:e,template:a,componentAPI:c,name:o})({slots:i,attributes:s,props:u});return{mount:(t,e,n)=>l.mount(t,n,e),update:(t,e)=>l.update(e,t),unmount:t=>l.unmount(t)}}}function St(t,e){return Object.assign({},t,ct(e))}function wt(e,n){let{slots:r,attributes:o,props:i}=n;return s=function(t){return[...C].reduce(((t,e)=>e(t)||t),t)}(dt(Object.create(e),{mount(n,s,a){return void 0===s&&(s={}),this[X]=function(t,e){void 0===e&&(e=[]);const n=e.map((e=>_(t,e))),r={};return Object.assign(r,Object.assign({expressions:n},jt((t=>e=>(n.forEach((n=>n[t](e))),r)))))}(n,o).mount(a),lt(this,H,Object.freeze(Object.assign({},function(e,n){return void 0===n&&(n={}),Object.assign({},function(e){return Array.from(e.attributes).reduce(((e,n)=>(e[t(n.name)]=n.value,e)),{})}(e),ct(n))}(n,i),g(this[X].expressions)))),this.state=St(this.state,s),this[W]=this.template.createDOM(n).clone(),Mt(n,this),e.name&&function(t,e){Ot(t)!==e&&bt(t,U,e)}(n,e.name),lt(this,F,n),lt(this,$,r),this.onBeforeMount(this.props,this.state),this[q]=a,this[W].mount(n,this,a),this.onMounted(this.props,this.state),this},update(t,e){void 0===t&&(t={}),e&&(this[q]=e,this[X].update(e));const n=g(this[X].expressions);if(!1!==this.shouldUpdate(n,this.props))return lt(this,H,Object.freeze(Object.assign({},this.props,n))),this.state=St(this.state,t),this.onBeforeUpdate(this.props,this.state),this[W].update(this,this[q]),this.onUpdated(this.props,this.state),this},unmount(t){return this.onBeforeUnmount(this.props,this.state),this[X].unmount(),this[W].unmount(this,this[q],null===t?null:!t),this.onUnmounted(this.props,this.state),this}})),Object.keys(e).filter((t=>l(e[t]))).forEach((t=>{s[t]=s[t].bind(s)})),s;var s}const{DOM_COMPONENT_INSTANCE_PROPERTY:Ct,COMPONENTS_IMPLEMENTATION_MAP:Ut,PLUGINS_SET:Pt}=Z,Dt={css:null,exports:{components:{"riot-todo-item":{css:null,exports:{state:{isEditing:!1,editingTitle:""},onEditing(){this.update({editingTitle:this.props.title,isEditing:!0}),this.$('input[name="title"]').focus()},updateEditTitle(t){this.update({editingTitle:t.target.value})},onCancelEditing(){this.update({isEditing:!1})},editTodo(t){t.preventDefault(),store.editTodo(this.props.id,this.state.editingTitle),this.update({isEditing:!1})},removeTodo(){store.removeTodo(this.props.id)},toggleCompleted(){store.toggleCompleted(this.props.id)}},template:function(t,e,n,r){return t('<div class="todo-item"><form expr2="expr2" class="todo-form"></form><div expr5="expr5" class="todo-view"></div></div>',[{type:n.IF,evaluate:function(t){return t.state.isEditing},redundantAttribute:"expr2",selector:"[expr2]",template:t('<input expr3="expr3" type="text" name="title" placeholder="Todo title"/><button class="material-icons">check</button><i expr4="expr4" class="material-icons">\n        close\n      </i>',[{expressions:[{type:e.EVENT,name:"onsubmit",evaluate:function(t){return t.editTodo}}]},{redundantAttribute:"expr3",selector:"[expr3]",expressions:[{type:e.VALUE,evaluate:function(t){return t.state.editingTitle}},{type:e.EVENT,name:"onchange",evaluate:function(t){return t.updateEditTitle}}]},{redundantAttribute:"expr4",selector:"[expr4]",expressions:[{type:e.EVENT,name:"onclick",evaluate:function(t){return t.onCancelEditing}}]}])},{type:n.IF,evaluate:function(t){return!t.state.isEditing},redundantAttribute:"expr5",selector:"[expr5]",template:t('<label><input expr6="expr6" type="checkbox"/><span expr7="expr7"> </span></label><i expr8="expr8" class="material-icons">\n        edit\n      </i><i expr9="expr9" class="material-icons">\n        delete\n      </i>',[{redundantAttribute:"expr6",selector:"[expr6]",expressions:[{type:e.ATTRIBUTE,name:"checked",evaluate:function(t){return t.props.isCompleted}},{type:e.EVENT,name:"onchange",evaluate:function(t){return t.toggleCompleted}}]},{redundantAttribute:"expr7",selector:"[expr7]",expressions:[{type:e.TEXT,childNodeIndex:0,evaluate:function(t){return t.props.title}}]},{redundantAttribute:"expr8",selector:"[expr8]",expressions:[{type:e.EVENT,name:"onclick",evaluate:function(t){return t.onEditing}}]},{redundantAttribute:"expr9",selector:"[expr9]",expressions:[{type:e.EVENT,name:"onclick",evaluate:function(t){return t.removeTodo}}]}])}])},name:"riot-todo-item"}},state:{todos:store.getTodos()},onMounted(){store.subscribeTodos((t=>{this.update({todos:t})}))},getTodoKey:t=>store.getTodoKey(t),addTodo(t){t.preventDefault(),store.addTodo(t.target.elements.title.value),t.currentTarget.reset()}},template:function(t,e,n,r){return t('<div class="card"><h5 class="section center-align white-text">Riot</h5><div class="card-content"><form expr0="expr0" class="add-form row valign-wrapper"><div class="input-field col s9"><input type="text" name="title" placeholder="Add todo"/></div><button class="col s3 btn">Add</button></form><div class="todo-items"><riot-todo-item expr1="expr1"></riot-todo-item></div></div></div>',[{redundantAttribute:"expr0",selector:"[expr0]",expressions:[{type:e.EVENT,name:"onsubmit",evaluate:function(t){return t.addTodo}}]},{type:n.EACH,getKey:function(t){return t.getTodoKey(t.todo)},condition:null,template:t(null,[{type:n.TAG,getComponent:r,evaluate:function(t){return"riot-todo-item"},slots:[],attributes:[{type:e.ATTRIBUTE,name:null,evaluate:function(t){return t.todo}}]}]),redundantAttribute:"expr1",selector:"[expr1]",itemName:"todo",indexName:null,evaluate:function(t){return t.state.todos}}])},name:"riot-todo-list"};var It;(It=Dt,function(t,e,n){let{slots:r,attributes:o,parentScope:i}=void 0===n?{}:n;return function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return e.reduce(((t,e)=>function(){return t(e(...arguments))}))}((e=>e.mount(t,i)),(t=>t({props:e,slots:r,attributes:o})),_t)(It)})(document.getElementById("riot"))})();